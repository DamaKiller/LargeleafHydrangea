# 约束
![image](https://user-images.githubusercontent.com/96570699/189513507-b6aaf5fc-4755-4dc9-81cf-0679c81e2c4b.png)   
![image](https://user-images.githubusercontent.com/96570699/189513577-ab982625-839d-437b-852c-cd425331c47d.png)  


### 非空约束
![image](https://user-images.githubusercontent.com/96570699/189513759-c01dada9-38c3-406c-8b8a-a4942eb768a7.png)  
![image](https://user-images.githubusercontent.com/96570699/189513851-75e1acfc-3819-40df-aa68-0c662ea68a75.png)  


### 唯一性约束
约束的字段具有唯一性，不能重复。  
![image](https://user-images.githubusercontent.com/96570699/189514009-94be7508-722d-4cb4-a7f0-c4c5a0e5c6d9.png)   
![image](https://user-images.githubusercontent.com/96570699/189514583-d40e7ecd-6cb9-46a4-bc1f-129e75c9a5fe.png)  
写在字段后面是各自具有唯一性（列级约束），放在括号内一块写，是联合唯一（表级约束）。   
![image](https://user-images.githubusercontent.com/96570699/189514601-e730255f-cfd4-4ab7-805e-0d07c381f28f.png)  
![image](https://user-images.githubusercontent.com/96570699/189515079-07805d31-5236-4c29-9f47-6eaedb4a03c1.png)  


# 主键（primary key， 简称PK）
![image](https://user-images.githubusercontent.com/96570699/189516496-48933292-faf9-4dba-962a-23ca08f6993b.png)  
![image](https://user-images.githubusercontent.com/96570699/189521065-28dd3942-b62f-4647-a3c7-cc121d2ee76c.png)  
![image](https://user-images.githubusercontent.com/96570699/189521103-074d4104-632c-47f0-a5cd-4e2620ba22ff.png)  
![image](https://user-images.githubusercontent.com/96570699/189521172-457e7ba8-e8c8-4c7e-8b2d-a41dd38372a8.png)     
![image](https://user-images.githubusercontent.com/96570699/189521577-2cfe8188-cadf-40cd-a8b4-02a474a9c572.png)  
![image](https://user-images.githubusercontent.com/96570699/189521600-8cdce873-eb89-4dec-98f6-5f018c51fcf1.png)  




# 外键（foreign key， 简称FK）
![image](https://user-images.githubusercontent.com/96570699/189521944-88baa2fe-1fef-4f45-bb57-438a0622e4ce.png)  
![image](https://user-images.githubusercontent.com/96570699/189522154-8fa6ca7a-33d6-4ae5-9822-5a5078f1d96d.png)  
![image](https://user-images.githubusercontent.com/96570699/189522408-fecc81eb-ec52-4809-9182-504677ac77f7.png)  
被引用的表是父表，引用的表是子表。  
![image](https://user-images.githubusercontent.com/96570699/189522533-6863a575-cbd4-4a60-93e1-7c4ed41c67b2.png)  
![image](https://user-images.githubusercontent.com/96570699/189524209-fa1e62cc-2158-46dd-b64e-3689b4bbeb8d.png)  
![image](https://user-images.githubusercontent.com/96570699/189524777-da053ddd-bead-4e8d-87ac-e0bcb5290b82.png)   




# 存储引擎
![image](https://user-images.githubusercontent.com/96570699/189527128-90a6debd-599a-40f9-bdc7-72bf55921e8d.png)  
![image](https://user-images.githubusercontent.com/96570699/189530677-d59dd04c-f9f9-4d0b-a550-a4568b294fb1.png)  
![image](https://user-images.githubusercontent.com/96570699/189530814-efe85dc3-909f-4cd1-ba83-32b714c056d4.png)  
![image](https://user-images.githubusercontent.com/96570699/189531111-f6467baa-572d-465f-8bf7-204d25e5d0c0.png)  




# 事务
![image](https://user-images.githubusercontent.com/96570699/189601734-231947a6-e675-472e-bbab-3ab16d5228ed.png)  
![image](https://user-images.githubusercontent.com/96570699/189602285-466431ed-345a-4d81-bf09-44a796bafaf2.png)  
![image](https://user-images.githubusercontent.com/96570699/189613398-2513f72b-4ebe-4ccd-abf4-088b7b5f3f79.png)  
![image](https://user-images.githubusercontent.com/96570699/189614528-ff76c75c-cd0f-4be1-a4b0-f384ef48395a.png)  
![image](https://user-images.githubusercontent.com/96570699/189694720-ead069f2-a869-483d-9cb2-036d57500d4f.png)
**回滚事务**  
![image](https://user-images.githubusercontent.com/96570699/189696278-6b6291c7-b9a7-4173-9fb8-0b8754281050.png)  
![image](https://user-images.githubusercontent.com/96570699/189696376-9f94dc8c-ab18-4418-bb2e-75b2886621af.png)  
**提交事务**  
![image](https://user-images.githubusercontent.com/96570699/189696558-7267fcb1-6655-46bd-956d-38fd2e6421e3.png)  
![image](https://user-images.githubusercontent.com/96570699/189696646-aa5c4e7a-522c-4896-91c9-0e072f8d986b.png)  
回滚也只会回滚到上次提交的位置。
![image](https://user-images.githubusercontent.com/96570699/189705311-58e1bb50-572a-4670-90ca-64e1c973d361.png)  
![image](https://user-images.githubusercontent.com/96570699/189708030-4de801c1-3c11-45cd-b2d5-95ed85cc8e42.png)    
![image](https://user-images.githubusercontent.com/96570699/189708189-19812178-d1e3-4018-9b6b-c5e033972e5f.png)  
![image](https://user-images.githubusercontent.com/96570699/189711020-196c692c-afaa-4fac-8316-389c71f720c7.png)  
![image](https://user-images.githubusercontent.com/96570699/189712063-ae180a1e-d254-472b-80a5-35ecc1d8028e.png)  
![image](https://user-images.githubusercontent.com/96570699/189795478-ea38dc84-4a0a-40f5-affe-0c31aa962d75.png)  
![image](https://user-images.githubusercontent.com/96570699/189795552-44493b85-b7ee-493f-a6f7-82d9110ec84a.png)  
更改事务隔离等级  
![image](https://user-images.githubusercontent.com/96570699/189796629-1d67a7a7-e590-4c6e-9cb4-d60590615fbf.png)  


### 隔离级别演示
**读未提交**  
![image](https://user-images.githubusercontent.com/96570699/189796988-20c8bf20-d6a9-4fd4-9c9f-21added031be.png) ![image](https://user-images.githubusercontent.com/96570699/189797017-1ef2b8f5-4d6e-4cd1-937e-9f7f1393fa2f.png)  
这是两个并行的数据库，一个插入了数据，但是另一个没插入数据的数据库查到了该数据，发生了脏读。    

**读已提交**  
![image](https://user-images.githubusercontent.com/96570699/189799167-08494eba-1f86-4c45-9870-cd4b61aaaf29.png)
![image](https://user-images.githubusercontent.com/96570699/189799125-78dd0e29-5830-4795-847e-7460a6a646c3.png)   
不提交查询不到。  
![image](https://user-images.githubusercontent.com/96570699/189799228-940d260e-08db-4f22-a207-25346f4df449.png)
![image](https://user-images.githubusercontent.com/96570699/189799212-6d21d48e-5075-498e-a329-4a66e82cc007.png)   
只有提交了之后才能查到。    

**可重复读**  
![image](https://user-images.githubusercontent.com/96570699/189854608-7eb71710-452f-49b6-bc43-fe45f099c85c.png)  
读到一条数据  
![image](https://user-images.githubusercontent.com/96570699/189854852-16b809cd-053e-483a-a809-955742261e50.png)  
![image](https://user-images.githubusercontent.com/96570699/189854974-5a13642c-ab5e-47cc-be9b-ea50393f265c.png)  
提交后查询还是一条数据，这就是幻想。    

**序列化**  
![image](https://user-images.githubusercontent.com/96570699/189858815-33ba5de1-16f1-4c15-97e5-bf611663bcd2.png)  
![image](https://user-images.githubusercontent.com/96570699/189858896-e8a2b5a2-6e42-456b-bbae-fee318b76590.png)  
两个事务同时操作t_user这张表，只要另一个事务没有结束另一个事务就无法向下进行。   
![image](https://user-images.githubusercontent.com/96570699/189859264-a0d062aa-3643-4227-a6ec-d836e721572a.png)  
![image](https://user-images.githubusercontent.com/96570699/189859306-adafcd86-a249-4dcf-84c2-56cfd8f5f1cd.png)  
只要一边提交了，另一边立马可以查出来。  




# 索引(index)
![image](https://user-images.githubusercontent.com/96570699/189950864-226a0966-d2f5-45b3-8fa7-9c23147c13a9.png)    
![image](https://user-images.githubusercontent.com/96570699/189951497-9e0ecbef-03f4-4568-aa8b-ef7344ca74d5.png)  
![image](https://user-images.githubusercontent.com/96570699/189953593-e4105116-50e6-4334-addd-96b4729fdd91.png)   


### 实现原理
![image](https://user-images.githubusercontent.com/96570699/189954593-bd21cab8-d3f6-4816-9341-8e947113b8c7.png)  
![image](https://user-images.githubusercontent.com/96570699/189958190-0c3ee48a-36e9-4f54-8312-b49f7f587883.png)  
索引是实现原理就是缩小查找范围，避免全表扫描。  
![image](https://user-images.githubusercontent.com/96570699/189961306-986759f5-a21a-4911-8eae-e8f48688e9eb.png)   
![image](https://user-images.githubusercontent.com/96570699/190189309-a3a823ae-637d-49d3-8613-76d52c5bff2e.png)  


### 索引的创建与删除
![image](https://user-images.githubusercontent.com/96570699/190190924-bdea9143-f4b5-4afc-8661-25be7c68398d.png)  
![image](https://user-images.githubusercontent.com/96570699/190192047-2f3f3d0d-31f7-472b-a1ff-6f7b86d89abe.png)  
并且后面14行也说明了没有用索引扫描。    
![image](https://user-images.githubusercontent.com/96570699/190372372-77adc76f-83a7-4d17-978b-53ce278309f3.png)    
类型是ref，并且后面是1行说明使用了索引查找。  


### 索引的失效
**第一种情况**  
![image](https://user-images.githubusercontent.com/96570699/190373413-398cf21f-0f2f-455a-95d7-36589147ad4c.png)  
![image](https://user-images.githubusercontent.com/96570699/190375352-0a22b055-4fcd-4413-8566-5cfbf1b7efb3.png)  
它不知道第一个字母是什么，只能一个个去查找。  

**第二种情况**  
![image](https://user-images.githubusercontent.com/96570699/190376055-51e5aeab-1f04-4874-9f28-19e894b52231.png)   

**第三种情况**  
![image](https://user-images.githubusercontent.com/96570699/190392786-3b814f13-41bf-4f25-885f-6c0aa7de40b3.png)  
![image](https://user-images.githubusercontent.com/96570699/190392942-c0fcacea-217e-49c0-8ffa-c9ba8e857e0e.png)  

**第四种情况**  
![image](https://user-images.githubusercontent.com/96570699/190394094-683f1a2e-5064-4a6d-955a-20decba92cdc.png)  

**第五种情况**  
![image](https://user-images.githubusercontent.com/96570699/190394445-79144e15-cf22-443e-9cc6-8dbbd205732d.png)  

![image](https://user-images.githubusercontent.com/96570699/190395597-c3441dc0-3a9f-4e3b-babc-6fab6e2c6ab5.png)  




# 视图
![image](https://user-images.githubusercontent.com/96570699/190396618-0cd3f272-2478-428c-aa1c-24cac6267852.png)  
![image](https://user-images.githubusercontent.com/96570699/190429398-5d6dd082-61f9-434d-a773-7d30017d29e4.png)  
![image](https://user-images.githubusercontent.com/96570699/190429595-e2416900-9431-4257-a344-83ff3a4dc686.png)  
![image](https://user-images.githubusercontent.com/96570699/190430477-8e3cde6e-933d-4351-8ef0-69bf20026818.png)  
![image](https://user-images.githubusercontent.com/96570699/190430625-f9e6581a-8bae-43d9-acfe-03714b6d9f93.png)  
![image](https://user-images.githubusercontent.com/96570699/190431084-44d41e64-b640-49d9-bacb-28b3335d29e6.png)  
![image](https://user-images.githubusercontent.com/96570699/190432996-b2527c14-f1c4-400a-b2fb-380cfb4121c2.png)  
![image](https://user-images.githubusercontent.com/96570699/190434307-040de314-0b1e-4d17-b0c1-689cdb5d5b06.png)  





# 数据库三范式
![image](https://user-images.githubusercontent.com/96570699/190471110-c5aaad3e-915f-41c8-9132-2135fbf75ccd.png)  


### 第一范式
![image](https://user-images.githubusercontent.com/96570699/190471264-6d4d0b6c-f460-4567-9142-3ce994389c2c.png)  


### 第二范式
![image](https://user-images.githubusercontent.com/96570699/190471347-fd19bc1b-3548-46b4-9eb7-417866518299.png)  
![image](https://user-images.githubusercontent.com/96570699/190471451-b22205d7-1350-43f4-ba4c-7c3524b8f535.png)  
![image](https://user-images.githubusercontent.com/96570699/190471539-06e5c4ad-93fc-42f4-bd7e-e7a749101c04.png)  
![image](https://user-images.githubusercontent.com/96570699/190471575-29d4d166-9918-411f-a70b-3d083ee10a74.png)  


### 第三范式
![image](https://user-images.githubusercontent.com/96570699/190471731-68eb5ed4-0266-4543-9adb-ba8dbce21fda.png)  
![image](https://user-images.githubusercontent.com/96570699/190471819-e9d0bb8a-2d7a-4972-8e89-3208b11bfcfb.png)  
![image](https://user-images.githubusercontent.com/96570699/190471849-67057d40-6b91-45b5-a118-3f5e33b30b2b.png)  








